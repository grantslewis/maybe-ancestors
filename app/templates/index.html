<!DOCTYPE html>
<html>

<head>
    <title>Draw and Transform</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        #mainHeader {
            text-align: center;
        }

        .main-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .left-section, .right-section {
            flex: 1;
            text-align: center;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .grid-container img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Section - Drawing Area -->
        <div class="left-section">
            <h1 id="mainHeader">Draw an Image</h1>
            <form action="/submit" method="post"> <!-- You can adjust the action to your desired endpoint -->
        
                <!-- Gender Section -->
                <fieldset>
                    <legend>Gender</legend>
                    <label><input type="radio" name="gender" value="male"> Male</label>
                    <label><input type="radio" name="gender" value="female"> Female</label>
                    <label><input type="radio" name="gender" value="other"> Other</label>
                </fieldset>
        
                <!-- Eye Color Section -->
                <fieldset>
                    <legend>Eye Color</legend>
                    <label><input type="radio" name="eyeColor" value="blue"> Blue</label>
                    <label><input type="radio" name="eyeColor" value="brown"> Brown</label>
                    <label><input type="radio" name="eyeColor" value="green"> Green</label>
                    <!-- Add more eye colors if needed -->
                </fieldset>
        
                <!-- Hair Color Section -->
                <fieldset>
                    <legend>Hair Color</legend>
                    <label><input type="radio" name="hairColor" value="blonde"> Blonde</label>
                    <label><input type="radio" name="hairColor" value="black"> Black</label>
                    <label><input type="radio" name="hairColor" value="brown"> Brown</label>
                    <!-- Add more hair colors if needed -->
                </fieldset>
        
                <!-- Skin Tone Section -->
                <fieldset>
                    <legend>Skin Tone</legend>
                    <label><input type="radio" name="skinTone" value="light"> Light</label>
                    <label><input type="radio" name="skinTone" value="medium"> Medium</label>
                    <label><input type="radio" name="skinTone" value="dark"> Dark</label>
                    <!-- Add more skin tones if needed -->
                </fieldset>
        
                <!-- Location Input -->
                <label for="location">Location:</label>
                <input type="text" id="location" name="location" placeholder="Enter a location">
        
                <!-- Date or Description Input -->
                <label for="dateOrDescription">Date or Description of Time Period:</label>
                <input type="text" id="dateOrDescription" name="dateOrDescription" placeholder="Enter a date or description">
        
                <!-- Submit Button -->
                <input type="submit" value="Submit">
            </form>
            <div>
                <textarea id="input_text" rows="5" cols="47"></textarea>
            </div>
            <!-- Transform Controls -->
            <div id="transformMode">
                <label for="intensitySlider">Faithfulness to Source Image: </label>
                <input type="range" id="intensitySlider" name="intensityLevel" min="0" max="1" step="0.01" value="0.3">
                <button id="submit">Transform Image</button>
            </div>
        </div>
        <!-- Right Section - Result Area -->
        <div class="right-section">
            <h1 id="mainHeader">Resulting Image</h1>
            <div class="result-images grid-container">
                <!-- Placeholder Images -->
                <img id="result-image-1" src="https://upload.wikimedia.org/wikipedia/en/5/5a/Black_question_mark.png" alt="Transformed Image">
                <img id="result-image-2" src="https://upload.wikimedia.org/wikipedia/en/5/5a/Black_question_mark.png" alt="Transformed Image">
                <img id="result-image-3" src="https://upload.wikimedia.org/wikipedia/en/5/5a/Black_question_mark.png" alt="Transformed Image">
                <img id="result-image-4" src="https://upload.wikimedia.org/wikipedia/en/5/5a/Black_question_mark.png" alt="Transformed Image">
            </div>
        </div>
    </div>

    <script>

        // Transform Image Handler
        $('#submit').click(function() {
            console.log("Submit button clicked!");

            const intensityLevel = $("#intensitySlider").val();
            const inputTextValue = $("#input_text").val();



            $.ajax({
                type: 'POST',
                url: '/transform',
                contentType: 'application/json',
                data: JSON.stringify({
                    intensityLevel: intensityLevel,
                    inputText: inputTextValue
                }),
                success: function(response) {
                    for(let key in response.result_images) {
                        const img_str = 'data:image/png;base64,' + response.result_images[key];
                        const idx = key.split('_')[2];
                        $(`#result-image-${idx}`).attr("src", img_str).show();
                    }
                },
                error: function(error) {
                    console.log(error);
                }
            });
        });

        function handleFormSubmit(event) {
            event.preventDefault();  // This prevents the form from submitting the traditional way
            
            // Accessing radio button values
            const genderValue = document.querySelector('input[name="gender"]:checked').value;
            const eyeColorValue = document.querySelector('input[name="eyeColor"]:checked').value;
            const hairColorValue = document.querySelector('input[name="hairColor"]:checked').value;
            const skinToneValue = document.querySelector('input[name="skinTone"]:checked').value;
        
            // Accessing text box values
            const locationValue = document.getElementById('location').value;
            const dateOrDescriptionValue = document.getElementById('dateOrDescription').value;
        
            console.log('Gender:', genderValue);
            console.log('Eye Color:', eyeColorValue);
            console.log('Hair Color:', hairColorValue);
            console.log('Skin Tone:', skinToneValue);
            console.log('Location:', locationValue);
            console.log('Date/Description:', dateOrDescriptionValue);
        
            // TODO: Process the form data as needed
        }
        
        // Add event listener for form submission
        document.querySelector('form').addEventListener('submit', handleFormSubmit);
    </script>
</body>

</html>